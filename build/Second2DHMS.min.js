/*! PROJECT_NAME - v0.1.0 - 2015-07-25
* http://PROJECT_WEBSITE/
* Copyright (c) 2015 YOUR_NAME; Licensed MIT */
console.log=console.log||{};var TimeClass=Class.create({initialize:function(a){this.selector=a,this.timeObj=$(a)},Second2DHMS:function(a){var b=a%60;a=parseInt(a/60);var c=a%60;a=parseInt(a/60);var d=a%24;a=parseInt(a/24);var e=a;return{day:e,hour:d,minute:c,second:b}}}),TimeScalarClass=Class.create(TimeClass,{initialize:function(a,b,c){function d(){c.unit=c.unit||"Second";var a={Day:{amplifier:86400,lowCtl:["Hour","Minute","Second"]},Hour:{amplifier:3600,lowCtl:["Minute","Second"]},Minute:{amplifier:60,lowCtl:["Second"]},Second:{amplifier:1,lowCtl:[]}},b=a[c.unit],d=b.amplifier,e=b.lowCtl;j.data("amplifier",d),c.min=c.min*d,c.max=c.max*d;for(var f=0;f<e.length;f++){var g=e[f];$("[id='"+g+"']",j).hide(),$("label[for='"+g+"']",j).hide()}}function e(a,b,c){a.empty();for(var d=[],e=b;c>=e;e++)d.push("<option title='"+e+"' value='"+e+"'>"+e+"</option>");a.append(d.join())}function f(){j.off("change","#Day"),j.on("change","#Day",function(a){var b=$(this).val();b=parseInt(b,10);var d=Math.floor(c.max/86400),f=c.max%86400,g=Math.floor(f/3600),h=Math.floor(c.min/86400),i=c.min%86400,j=Math.floor(i/3600);h===d?(e(m,j,g),$(this).data("cursor","MinMax")):b>h&&d>b?(e(m,0,23),$(this).data("cursor","Middle")):b===d?(e(m,0,g),$(this).data("cursor","Max")):b===h&&(e(m,j,23),$(this).data("cursor","Min")),m.change(),a.stopPropagation()})}function g(){j.off("change","#Hour"),j.on("change","#Hour",function(a){var b=$(this).val();b=parseInt(b,10);var d=c.max%86400,f=Math.floor(d/3600),g=c.max%3600,h=Math.floor(g/60),i=c.min%86400,j=Math.floor(i/3600),k=c.min%3600,m=Math.floor(k/60);"MinMax"===l.data("cursor")&&j===f?(e(n,m,h),$(this).data("cursor","MinMax")):"Max"!==l.data("cursor")&&"MinMax"!==l.data("cursor")||b!==f?"Min"!==l.data("cursor")&&"MinMax"!==l.data("cursor")||b!==j?(e(n,0,59),$(this).data("cursor","Middle")):(e(n,m,59),$(this).data("cursor","Min")):(e(n,0,h),$(this).data("cursor","Max")),n.change(),a.stopPropagation()})}function h(){j.off("change","#Minute"),j.on("change","#Minute",function(a){var b=$(this).val();b=parseInt(b,10);var d=c.max%3600,f=Math.floor(d/60),g=c.max%60,h=Math.floor(g/1),i=c.min%3600,j=Math.floor(i/60),k=c.min%60,n=Math.floor(k/1);"MinMax"===l.data("cursor")&&"MinMax"===m.data("cursor")&&j===f?e(o,n,h):"Max"!==l.data("cursor")&&"MinMax"!==l.data("cursor")||"Max"!==m.data("cursor")&&"MinMax"!==m.data("cursor")||b!=f?"Min"!==l.data("cursor")&&"MinMax"!==l.data("cursor")||"Min"!==m.data("cursor")&&"MinMax"!==m.data("cursor")||b!=j?e(o,0,59):e(o,n,59):e(o,0,h),a.stopPropagation()})}function i(){var a=Math.floor(c.min/86400),b=Math.floor(c.max/86400);e(l,a,b),l.change();var b=Math.floor(c.max/86400);if(0==b){l.hide(),$("label[for='Day']",j).hide();var d=Math.floor(c.max/3600);if(0==d){m.hide(),$("label[for='Hour']",j).hide();var f=Math.floor(c.max/60);0==f&&(n.hide(),$("label[for='Minute']",j).hide())}}}a(b),this.range=c;var j=this.timeObj;j.empty();var k='<select id="Day"></select><label for="Day">天</label>';k+='<select id="Hour"></select><label for="Hour">时</label>',k+='<select id="Minute"></select><label for="Minute">分</label>',k+='<select id="Second"></select><label for="Second">秒</label>',j.append(k),f(),g(),h();var l=this.dayObj=$("#Day",j),m=this.hourObj=$("#Hour",j),n=this.minuteObj=$("#Minute",j),o=this.secondObj=$("#Second",j);this.Second2DHMS;d(),i()},Second2DHMS:function(a,b){return a(b)},SetTimeControlValue:function(a){var b=this.Second2DHMS,c=this.dayObj,d=this.hourObj,e=this.minuteObj,f=this.secondObj,g=this.timeObj,h=g.data("amplifier"),i=a*h,j=b(i);c.val(j.day),c.change(),d.val(j.hour),d.change(),e.val(j.minute),e.change(),f.val(j.second)},GetTimeControlValue:function(){var a=this.dayObj,b=this.hourObj,c=this.minuteObj,d=this.secondObj,e=this.timeObj,f=a.val(),g=b.val(),h=c.val(),i=d.val(),j=86400*f+3600*g+60*h+1*i,k=e.data("amplifier"),l=Math.floor(j/k);return l}});