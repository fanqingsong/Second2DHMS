/*! PROJECT_NAME - v0.1.0 - 2015-07-25
* http://PROJECT_WEBSITE/
* Copyright (c) 2015 YOUR_NAME; Licensed MIT */
console.log=console.log||{};var TimeScalarClass=Class.create({initialize:function(a,b){function c(){b.unit=b.unit||"Second";var a={Day:{amplifier:86400,lowCtl:["Hour","Minute","Second"]},Hour:{amplifier:3600,lowCtl:["Minute","Second"]},Minute:{amplifier:60,lowCtl:["Second"]},Second:{amplifier:1,lowCtl:[]}},c=a[b.unit],d=c.amplifier,e=c.lowCtl;i.data("amplifier",d),b.min=b.min*d,b.max=b.max*d;for(var f=0;f<e.length;f++){var g=e[f];$("[id='"+g+"']",i).hide(),$("label[for='"+g+"']",i).hide()}}function d(a,b,c){a.empty();for(var d=[],e=b;c>=e;e++)d.push("<option title='"+e+"' value='"+e+"'>"+e+"</option>");a.append(d.join())}function e(){i.off("change","#Day"),i.on("change","#Day",function(a){var c=$(this).val();c=parseInt(c,10);var e=Math.floor(b.max/86400),f=b.max%86400,g=Math.floor(f/3600),h=Math.floor(b.min/86400),i=b.min%86400,j=Math.floor(i/3600);h===e?(d(l,j,g),$(this).data("cursor","MinMax")):c>h&&e>c?(d(l,0,23),$(this).data("cursor","Middle")):c===e?(d(l,0,g),$(this).data("cursor","Max")):c===h&&(d(l,j,23),$(this).data("cursor","Min")),l.change(),a.stopPropagation()})}function f(){i.off("change","#Hour"),i.on("change","#Hour",function(a){var c=$(this).val();c=parseInt(c,10);var e=b.max%86400,f=Math.floor(e/3600),g=b.max%3600,h=Math.floor(g/60),i=b.min%86400,j=Math.floor(i/3600),l=b.min%3600,n=Math.floor(l/60);"MinMax"===k.data("cursor")&&j===f?(d(m,n,h),$(this).data("cursor","MinMax")):"Max"!==k.data("cursor")&&"MinMax"!==k.data("cursor")||c!==f?"Min"!==k.data("cursor")&&"MinMax"!==k.data("cursor")||c!==j?(d(m,0,59),$(this).data("cursor","Middle")):(d(m,n,59),$(this).data("cursor","Min")):(d(m,0,h),$(this).data("cursor","Max")),m.change(),a.stopPropagation()})}function g(){i.off("change","#Minute"),i.on("change","#Minute",function(a){var c=$(this).val();c=parseInt(c,10);var e=b.max%3600,f=Math.floor(e/60),g=b.max%60,h=Math.floor(g/1),i=b.min%3600,j=Math.floor(i/60),m=b.min%60,o=Math.floor(m/1);"MinMax"===k.data("cursor")&&"MinMax"===l.data("cursor")&&j===f?d(n,o,h):"Max"!==k.data("cursor")&&"MinMax"!==k.data("cursor")||"Max"!==l.data("cursor")&&"MinMax"!==l.data("cursor")||c!==f?"Min"!==k.data("cursor")&&"MinMax"!==k.data("cursor")||"Min"!==l.data("cursor")&&"MinMax"!==l.data("cursor")||c!==j?d(n,0,59):d(n,o,59):d(n,0,h),a.stopPropagation()})}function h(){var a=Math.floor(b.min/86400),c=Math.floor(b.max/86400);if(d(k,a,c),k.change(),0===c){k.hide(),$("label[for='Day']",i).hide();var e=Math.floor(b.max/3600);if(0===e){l.hide(),$("label[for='Hour']",i).hide();var f=Math.floor(b.max/60);0===f&&(m.hide(),$("label[for='Minute']",i).hide())}}}var i=this.timeObj=$(a);this.range=b,i.empty();var j='<select id="Day"></select><label for="Day">天</label>';j+='<select id="Hour"></select><label for="Hour">时</label>',j+='<select id="Minute"></select><label for="Minute">分</label>',j+='<select id="Second"></select><label for="Second">秒</label>',i.append(j);var k=this.dayObj=$("#Day",i),l=this.hourObj=$("#Hour",i),m=this.minuteObj=$("#Minute",i),n=this.secondObj=$("#Second",i);e(),f(),g(),c(),h()},Second2DHMS:function(a){var b=a%60;a=parseInt(a/60);var c=a%60;a=parseInt(a/60);var d=a%24;a=parseInt(a/24);var e=a;return{day:e,hour:d,minute:c,second:b}},SetTimeControlValue:function(a){var b=this.Second2DHMS,c=this.dayObj,d=this.hourObj,e=this.minuteObj,f=this.secondObj,g=this.timeObj,h=g.data("amplifier"),i=a*h,j=b(i);c.val(j.day),c.change(),d.val(j.hour),d.change(),e.val(j.minute),e.change(),f.val(j.second)},GetTimeControlValue:function(){var a=this.dayObj,b=this.hourObj,c=this.minuteObj,d=this.secondObj,e=this.timeObj,f=a.val(),g=b.val(),h=c.val(),i=d.val(),j=86400*f+3600*g+60*h+1*i,k=e.data("amplifier"),l=Math.floor(j/k);return l}});